<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üé• –ü—Ä–æ—Å—Ç–æ–π –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 768px) {
            .video-grid {
                grid-template-columns: 1fr !important;
                padding: 5px !important;
            }
            
            .video-container {
                min-height: 180px !important;
            }
            
            .controls {
                width: 95% !important;
                padding: 8px 16px !important;
                border-radius: 25px !important;
            }
            
            .control-btn {
                min-width: 60px !important;
                padding: 8px !important;
            }
            
            .control-btn span {
                font-size: 10px !important;
            }
            
            .sidebar {
                max-height: 40vh !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
            
            .chat-messages {
                max-height: 200px !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
        }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞ –Ω–∞ iOS */
        * {
            -webkit-overflow-scrolling: touch;
        }
        
        html, body {
            overflow: hidden;
            height: 100%;
            position: fixed;
            width: 100%;
        }
    </style>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="logo">
                <i class="fas fa-video"></i>
                <h1>–ü—Ä–æ—Å—Ç–æ–π –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫</h1>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <input type="text" id="userName" placeholder="–í–∞—à–µ –∏–º—è" value="–£—á–∞—Å—Ç–Ω–∏–∫">
                </div>
                
                <div class="button-group">
                    <button id="createRoomBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É
                    </button>
                    <div class="divider">–∏–ª–∏</div>
                    <button id="showJoinFormBtn" class="btn btn-secondary">
                        <i class="fas fa-sign-in-alt"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                    </button>
                </div>
                
                <div id="joinForm" style="display: none; margin-top: 20px;">
                    <div class="input-group">
                        <input type="text" id="roomCode" placeholder="–ö–æ–¥ –≤—Å—Ç—Ä–µ—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: ABCD-1234)">
                    </div>
                    <div class="button-group">
                        <button id="confirmJoinBtn" class="btn btn-primary">
                            <i class="fas fa-check"></i> –í–æ–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É
                        </button>
                        <button id="cancelJoinBtn" class="btn btn-secondary">
                            <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="info">
                <p><i class="fas fa-check-circle"></i> –†–∞–±–æ—á–∏–π –∑–≤—É–∫ –∏ –≤–∏–¥–µ–æ</p>
                <p><i class="fas fa-check-circle"></i> –ß–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                <p><i class="fas fa-check-circle"></i> –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</p>
            </div>
        </div>
    </div>

    <!-- –ö–æ–º–Ω–∞—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏ -->
    <div id="roomScreen" class="screen">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <div class="room-info">
                <span class="room-id" id="currentRoomId">XXXX-XXXX</span>
                <button id="copyLinkBtn" class="btn-icon" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É">
                    <i class="fas fa-copy"></i>
                </button>
                <button id="showParticipantsBtn" class="btn-icon" title="–£—á–∞—Å—Ç–Ω–∏–∫–∏">
                    <i class="fas fa-users"></i> <span id="participantCount">1</span>
                </button>
            </div>
            <div class="timer" id="timer">00:00</div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="main-content">
            <!-- –í–∏–¥–µ–æ —Å–µ—Ç–∫–∞ -->
            <div class="video-section">
                <div id="videoGrid" class="video-grid">
                    <!-- –í–∏–¥–µ–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="sidebar">
                <!-- –ß–∞—Ç -->
                <div class="chat-box">
                    <h3><i class="fas fa-comments"></i> –ß–∞—Ç <button id="clearChatBtn" class="btn-icon small">–û—á–∏—Å—Ç–∏—Ç—å</button></h3>
                    <div id="chatMessages" class="chat-messages">
                        <div class="message system-message">
                            <strong>–°–∏—Å—Ç–µ–º–∞:</strong> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫!
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
                        <button id="sendMessageBtn" class="btn-icon">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="controls">
            <button id="toggleMicBtn" class="control-btn active" title="–ú–∏–∫—Ä–æ—Ñ–æ–Ω">
                <i class="fas fa-microphone"></i>
                <span>–í—ã–∫–ª</span>
            </button>
            
            <button id="toggleCamBtn" class="control-btn active" title="–ö–∞–º–µ—Ä–∞">
                <i class="fas fa-video"></i>
                <span>–í—ã–∫–ª</span>
            </button>
            
            <button id="screenShareBtn" class="control-btn" title="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞">
                <i class="fas fa-desktop"></i>
                <span>–≠–∫—Ä–∞–Ω</span>
            </button>
            
            <button id="toggleChatBtn" class="control-btn" title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —á–∞—Ç">
                <i class="fas fa-comment"></i>
                <span>–ß–∞—Ç</span>
            </button>
            
            <button id="leaveBtn" class="control-btn danger" title="–í—ã–π—Ç–∏">
                <i class="fas fa-phone-slash"></i>
                <span>–í—ã–π—Ç–∏</span>
            </button>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
    
    <script>
        // –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∫–ª–∞–¥–∫–∞–º–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
        document.addEventListener('DOMContentLoaded', function() {
            // –ö–Ω–æ–ø–∫–∏ —Ñ–æ—Ä–º—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
            document.getElementById('showJoinFormBtn').addEventListener('click', function() {
                document.getElementById('joinForm').style.display = 'block';
                this.style.display = 'none';
                document.getElementById('createRoomBtn').style.display = 'none';
            });
            
            document.getElementById('cancelJoinBtn').addEventListener('click', function() {
                document.getElementById('joinForm').style.display = 'none';
                document.getElementById('showJoinFormBtn').style.display = 'block';
                document.getElementById('createRoomBtn').style.display = 'block';
            });
            
            // –§–∏–∫—Å –¥–ª—è iOS —Å–∫—Ä–æ–ª–ª–∞
            document.body.addEventListener('touchmove', function(e) {
                e.preventDefault();
            }, { passive: false });
            
            // –†–∞–∑—Ä–µ—à–∞–µ–º —Å–∫—Ä–æ–ª–ª –≤ —á–∞—Ç–µ
            document.getElementById('chatMessages').addEventListener('touchmove', function(e) {
                e.stopPropagation();
            }, { passive: true });
        });
    </script>
</body>
</html>
